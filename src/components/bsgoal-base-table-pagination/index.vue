<!--
 * @Author: canlong.shen
 * @Date: 2023-04-15 16:34:57
 * @LastEditors: canlong.shen
 * @LastEditTime: 2023-08-28 09:55:41
 * @FilePath: \v3_basic_component\src\components\bsgoal-base-table-pagination\index.vue
 * @Description: 表格的分页按钮
 * 
-->

<script setup>
/* setup模板
---------------------------------------------------------------- */
import { ref, computed, inject, unref , watchEffect } from 'vue'
import zhCn from 'element-plus/dist/locale/zh-cn.mjs'
import BsgoalBaseSizes from '../bsgoal-base-sizes/index.vue'
defineOptions({
  name: 'BsgoalBaseTablePagination'
})

const props = defineProps({
  /**
   * 当前页数
   */
  currentPage: {
    type: [Number],
    default: 1
  },
  /**
   * 可选页数集合
   */
  pageSizes: {
    type: [Array],
    default: () => [10, 20, 30, 40, 50, 100]
  },
  /**
   * 每页显示条目个数
   */
  pageSize: {
    type: [Number],
    default: 20
  },
  /**
   * 总条目
   */
  total: {
    type: [Number],
    default: 0
  }
})

const emits = defineEmits(['on-size-change', 'on-current-change'])

/**
 * @Author: canlong.shen
 * @description: page-size 改变时触发
 * @default:
 * @return {*}
 */
const triggerSizeChange = (size = 0) => {
  emits('on-size-change', size)
}
/**
 * @Author: canlong.shen
 * @description: current-change
 * @default:
 * @return {*}
 */
const triggerCurrentChange = (current = 1) => {
  emits('on-current-change', current)
}
const page = ref(1)

watchEffect(() => {
  const { currentPage = 1 } = props
  page.value = currentPage
})
</script>
<template>
  <div class="bsgoal-base-table-pagination">
    <div class="base_table_pagination">
      <el-config-provider :locale="zhCn">
        <el-pagination
          background
          layout="total, slot, prev, pager, next, jumper"
          v-model:current-page="page"
          :page-sizes="pageSizes"
          :page-size="pageSize"
          :total="total"
          @size-change="triggerSizeChange"
          @current-change="triggerCurrentChange"
        >
          <template #default="">
            <BsgoalBaseSizes
              :page-sizes="pageSizes"
              :page-size="pageSize"
              @on-size-change="triggerSizeChange"
            />
          </template>
        </el-pagination>
      </el-config-provider>
    </div>
  </div>
</template>
<style lang="scss">
/* 覆盖样式
---------------------------------------------------------------- */
.bsgoal-base-table-pagination {
  text-align: right;
  .base_table_pagination {
    display: inline-block;
    margin-top: 16px;
  }
}
</style>
